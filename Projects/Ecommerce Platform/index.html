<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopZone - E-Commerce Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-tabs {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .tab.active {
            background: linear-gradient(45deg, #764ba2, #667eea);
            transform: scale(1.05);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-icon {
            position: relative;
            font-size: 1.5rem;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-icon:hover {
            transform: scale(1.1);
            color: #764ba2;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .product-info h3 {
            margin-bottom: 10px;
            color: #333;
            font-size: 1.3rem;
        }

        .product-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .product-stock {
            margin-bottom: 15px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .in-stock {
            background: #d4edda;
            color: #155724;
        }

        .low-stock {
            background: #fff3cd;
            color: #856404;
        }

        .out-of-stock {
            background: #f8d7da;
            color: #721c24;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            background: #ccc;
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }

        .search-filter {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .filter-select {
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .control-panel {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .cart-items {
            max-height: 400px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #667eea;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: #667eea;
            font-weight: bold;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 30px;
            height: 30px;
            border: none;
            background: #667eea;
            color: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quantity-btn:hover {
            background: #764ba2;
            transform: scale(1.1);
        }

        .cart-total {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
        }

        .payment-form {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #28a745;
            color: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #dc3545;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
            }

            .nav-tabs {
                order: 3;
                width: 100%;
                justify-content: center;
            }

            .search-filter {
                flex-direction: column;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-store"></i>
                ShopZone
            </div>
            <div class="user-actions">
                <div class="cart-icon" onclick="showTab('cart')">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <button class="btn" onclick="login()" id="loginBtn">Login</button>
            </div>
            <nav class="nav-tabs">
                <button class="tab active" onclick="showTab('products')">Products</button>
                <button class="tab" onclick="showTab('cart')">Cart</button>
                <button class="tab" onclick="showTab('analytics')">Analytics</button>
                <button class="tab" onclick="showTab('admin')">Admin</button>
            </nav>
        </header>

        <main class="main-content">
            <!-- Products Tab -->
            <div id="products" class="tab-content active">
                <div class="search-filter">
                    <input type="text" class="search-input" placeholder="Search products..." id="searchInput" oninput="filterProducts()">
                    <select class="filter-select" id="categoryFilter" onchange="filterProducts()">
                        <option value="">All Categories</option>
                        <option value="electronics">Electronics</option>
                        <option value="clothing">Clothing</option>
                        <option value="books">Books</option>
                        <option value="home">Home & Garden</option>
                    </select>
                    <select class="filter-select" id="priceFilter" onchange="filterProducts()">
                        <option value="">All Prices</option>
                        <option value="0-50">$0 - $50</option>
                        <option value="50-100">$50 - $100</option>
                        <option value="100-200">$100 - $200</option>
                        <option value="200+">$200+</option>
                    </select>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </div>

            <!-- Cart Tab -->
            <div id="cart" class="tab-content">
                <h2 style="margin-bottom: 20px; text-align: center; color: #667eea;">Shopping Cart</h2>
                <div class="cart-items" id="cartItems"></div>
                <div class="cart-total" id="cartTotal">Total: $0.00</div>
                <div class="payment-form">
                    <h3 style="margin-bottom: 20px; color: #333;">Payment Information</h3>
                    <div class="form-group">
                        <label>Card Number</label>
                        <input type="text" placeholder="1234 5678 9012 3456" maxlength="19" id="cardNumber">
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>Expiry Date</label>
                            <input type="text" placeholder="MM/YY" maxlength="5" id="cardExpiry">
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="text" placeholder="123" maxlength="3" id="cardCvv">
                        </div>
                    </div>
                    <button class="btn" onclick="processPayment()" style="margin-top: 20px;">
                        <i class="fas fa-credit-card"></i> Process Payment
                    </button>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <h2 style="margin-bottom: 30px; text-align: center; color: #667eea;">Analytics Dashboard</h2>
                <div class="analytics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="totalSales">$15,847</div>
                        <div class="metric-label">Total Sales</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="totalOrders">245</div>
                        <div class="metric-label">Total Orders</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="totalCustomers">1,234</div>
                        <div class="metric-label">Total Customers</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="conversionRate">3.2%</div>
                        <div class="metric-label">Conversion Rate</div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3 style="margin-bottom: 20px; color: #333;">Sales Trend (Last 7 Days)</h3>
                    <canvas id="salesChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-container">
                    <h3 style="margin-bottom: 20px; color: #333;">Top Selling Products</h3>
                    <div id="topProducts"></div>
                </div>
            </div>

            <!-- Admin Tab -->
            <div id="admin" class="tab-content">
                <h2 style="margin-bottom: 30px; text-align: center; color: #667eea;">Admin Panel</h2>
                <div class="admin-controls">
                    <div class="control-panel">
                        <h3 style="margin-bottom: 20px; color: #333;">Add New Product</h3>
                        <div class="form-group">
                            <label>Product Name</label>
                            <input type="text" id="newProductName" placeholder="Enter product name">
                        </div>
                        <div class="form-group">
                            <label>Price</label>
                            <input type="number" id="newProductPrice" placeholder="0.00" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="newProductCategory">
                                <option value="electronics">Electronics</option>
                                <option value="clothing">Clothing</option>
                                <option value="books">Books</option>
                                <option value="home">Home & Garden</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Stock Quantity</label>
                            <input type="number" id="newProductStock" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="newProductDesc" rows="3" placeholder="Product description"></textarea>
                        </div>
                        <button class="btn" onclick="addProduct()">Add Product</button>
                    </div>
                    
                    <div class="control-panel">
                        <h3 style="margin-bottom: 20px; color: #333;">Inventory Management</h3>
                        <div id="inventoryList"></div>
                        <button class="btn" onclick="updateInventory()" style="margin-top: 20px;">Update All Inventory</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Global state management
        let products = [
            { id: 1, name: "Wireless Headphones", price: 89.99, category: "electronics", stock: 25, icon: "🎧", description: "Premium wireless headphones with noise cancellation" },
            { id: 2, name: "Cotton T-Shirt", price: 24.99, category: "clothing", stock: 50, icon: "👕", description: "Comfortable 100% cotton t-shirt" },
            { id: 3, name: "Programming Book", price: 45.99, category: "books", stock: 15, icon: "📚", description: "Learn modern web development" },
            { id: 4, name: "Plant Pot", price: 19.99, category: "home", stock: 30, icon: "🪴", description: "Beautiful ceramic plant pot" },
            { id: 5, name: "Smartphone", price: 699.99, category: "electronics", stock: 8, icon: "📱", description: "Latest smartphone with advanced features" },
            { id: 6, name: "Jeans", price: 79.99, category: "clothing", stock: 0, icon: "👖", description: "Premium denim jeans" },
            { id: 7, name: "Cookbook", price: 29.99, category: "books", stock: 22, icon: "📖", description: "Delicious recipes for home cooking" },
            { id: 8, name: "Desk Lamp", price: 34.99, category: "home", stock: 12, icon: "💡", description: "Adjustable LED desk lamp" }
        ];

        let cart = [];
        let isLoggedIn = false;
        let currentUser = null;

        // Initialize the application
        function init() {
            renderProducts();
            updateCartCount();
            renderInventory();
            updateAnalytics();
            drawSalesChart();
        }

        // Tab management
        function showTab(tabName) {
            // Remove active class from all tabs and content
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding content
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Update analytics when analytics tab is shown
            if (tabName === 'analytics') {
                updateAnalytics();
                drawSalesChart();
            }
        }

        // Product rendering and filtering
        function renderProducts(productsToRender = products) {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';

            productsToRender.forEach(product => {
                const stockClass = product.stock === 0 ? 'out-of-stock' : 
                                 product.stock < 10 ? 'low-stock' : 'in-stock';
                const stockText = product.stock === 0 ? 'Out of Stock' : 
                                product.stock < 10 ? `Low Stock (${product.stock})` : 
                                `In Stock (${product.stock})`;

                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">${product.icon}</div>
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="product-stock ${stockClass}">${stockText}</div>
                        <p style="color: #666; margin-bottom: 15px; font-size: 0.9rem;">${product.description}</p>
                        <button class="btn" onclick="addToCart(${product.id})" 
                                ${product.stock === 0 ? 'disabled' : ''}>
                            <i class="fas fa-cart-plus"></i> 
                            ${product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}
                        </button>
                    </div>
                `;
                grid.appendChild(productCard);
            });
        }

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const priceFilter = document.getElementById('priceFilter').value;

            let filtered = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) ||
                                    product.description.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || product.category === categoryFilter;
                
                let matchesPrice = true;
                if (priceFilter) {
                    if (priceFilter === '0-50') {
                        matchesPrice = product.price <= 50;
                    } else if (priceFilter === '50-100') {
                        matchesPrice = product.price > 50 && product.price <= 100;
                    } else if (priceFilter === '100-200') {
                        matchesPrice = product.price > 100 && product.price <= 200;
                    } else if (priceFilter === '200+') {
                        matchesPrice = product.price > 200;
                    }
                }

                return matchesSearch && matchesCategory && matchesPrice;
            });

            renderProducts(filtered);
        }

        // Cart management
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || product.stock === 0) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                    showNotification('Updated quantity in cart!');
                } else {
                    showNotification('Cannot add more items - insufficient stock!', 'error');
                    return;
                }
            } else {
                cart.push({ ...product, quantity: 1 });
                showNotification('Added to cart!');
            }

            updateCartCount();
            renderCart();
            
            // Update product stock in real-time
            product.stock--;
            renderProducts();
            renderInventory();
        }

        function removeFromCart(productId) {
            const itemIndex = cart.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                const item = cart[itemIndex];
                const product = products.find(p => p.id === productId);
                
                // Return stock
                product.stock += item.quantity;
                
                cart.splice(itemIndex, 1);
                updateCartCount();
                renderCart();
                renderProducts();
                renderInventory();
                showNotification('Removed from cart!');
            }
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (!item || !product) return;

            const newQuantity = item.quantity + change;
            
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }

            if (change > 0 && product.stock < 1) {
                showNotification('Insufficient stock!', 'error');
                return;
            }

            item.quantity = newQuantity;
            
            // Update product stock
            product.stock -= change;
            
            updateCartCount();
            renderCart();
            renderProducts();
            renderInventory();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');

            if (cart.length === 0) {
                cartItems.innerHTML = '<div style="text-align: center; padding: 40px; color: #666;">Your cart is empty</div>';
                cartTotal.innerHTML = 'Total: $0.00';
                return;
            }

            cartItems.innerHTML = '';
            let total = 0;

            cart.forEach(item => {
                total += item.price * item.quantity;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">${item.icon}</div>
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price.toFixed(2)} each</div>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">
                            <i class="fas fa-minus"></i>
                        </button>
                        <span style="margin: 0 10px; font-weight: bold;">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <button class="quantity-btn" onclick="removeFromCart(${item.id})" 
                            style="background: #dc3545; margin-left: 10px;">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                cartItems.appendChild(cartItem);
            });

            cartTotal.innerHTML = `Total: ${total.toFixed(2)}`;
        }

        // Payment processing
        function processPayment() {
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }

            const cardNumber = document.getElementById('cardNumber').value;
            const cardExpiry = document.getElementById('cardExpiry').value;
            const cardCvv = document.getElementById('cardCvv').value;

            if (!cardNumber || !cardExpiry || !cardCvv) {
                showNotification('Please fill in all payment details!', 'error');
                return;
            }

            // Simulate payment processing
            showNotification('Processing payment...', 'info');
            
            setTimeout(() => {
                // Update analytics
                const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                updateSalesData(total, cart.length);
                
                // Clear cart
                cart = [];
                updateCartCount();
                renderCart();
                
                // Clear payment form
                document.getElementById('cardNumber').value = '';
                document.getElementById('cardExpiry').value = '';
                document.getElementById('cardCvv').value = '';
                
                showNotification('Payment successful! Thank you for your order!');
                
                // Update analytics display
                updateAnalytics();
            }, 2000);
        }

        // Admin functions
        function addProduct() {
            const name = document.getElementById('newProductName').value;
            const price = parseFloat(document.getElementById('newProductPrice').value);
            const category = document.getElementById('newProductCategory').value;
            const stock = parseInt(document.getElementById('newProductStock').value);
            const description = document.getElementById('newProductDesc').value;

            if (!name || !price || !stock || !description) {
                showNotification('Please fill in all fields!', 'error');
                return;
            }

            const icons = {
                electronics: ['📱', '💻', '🎧', '📷', '⌚', '🖥️'],
                clothing: ['👕', '👖', '👗', '🧥', '👟', '👒'],
                books: ['📚', '📖', '📝', '🖊️', '📓', '📔'],
                home: ['🪴', '💡', '🛏️', '🪑', '🖼️', '🕯️']
            };

            const categoryIcons = icons[category];
            const randomIcon = categoryIcons[Math.floor(Math.random() * categoryIcons.length)];

            const newProduct = {
                id: products.length + 1,
                name,
                price,
                category,
                stock,
                description,
                icon: randomIcon
            };

            products.push(newProduct);
            renderProducts();
            renderInventory();
            
            // Clear form
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductStock').value = '';
            document.getElementById('newProductDesc').value = '';

            showNotification('Product added successfully!');
        }

        function renderInventory() {
            const inventoryList = document.getElementById('inventoryList');
            inventoryList.innerHTML = '';

            products.forEach(product => {
                const stockClass = product.stock === 0 ? 'out-of-stock' : 
                                 product.stock < 10 ? 'low-stock' : 'in-stock';

                const inventoryItem = document.createElement('div');
                inventoryItem.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 15px;
                    margin-bottom: 10px;
                    background: #f8f9fa;
                    border-radius: 8px;
                    border-left: 4px solid ${product.stock === 0 ? '#dc3545' : product.stock < 10 ? '#ffc107' : '#28a745'};
                `;

                inventoryItem.innerHTML = `
                    <div>
                        <strong>${product.name}</strong>
                        <div style="font-size: 0.9rem; color: #666;">${product.category}</div>
                    </div>
                    <div style="text-align: right;">
                        <input type="number" value="${product.stock}" min="0" 
                               style="width: 80px; padding: 5px; border: 1px solid #ddd; border-radius: 4px;"
                               onchange="updateProductStock(${product.id}, this.value)">
                        <div class="product-stock ${stockClass}" style="margin-top: 5px; font-size: 0.8rem;">
                            ${product.stock === 0 ? 'Out of Stock' : product.stock < 10 ? 'Low Stock' : 'In Stock'}
                        </div>
                    </div>
                `;

                inventoryList.appendChild(inventoryItem);
            });
        }

        function updateProductStock(productId, newStock) {
            const product = products.find(p => p.id === productId);
            if (product) {
                product.stock = parseInt(newStock) || 0;
                renderProducts();
                renderInventory();
                showNotification('Stock updated!');
            }
        }

        function updateInventory() {
            renderInventory();
            showNotification('Inventory updated successfully!');
        }

        // Analytics functions
        let salesData = {
            totalSales: 15847,
            totalOrders: 245,
            totalCustomers: 1234,
            conversionRate: 3.2,
            dailySales: [2100, 1800, 2400, 2200, 2600, 2300, 2500]
        };

        function updateSalesData(amount, orderCount) {
            salesData.totalSales += amount;
            salesData.totalOrders += orderCount;
            salesData.dailySales[6] += amount; // Add to today's sales
        }

        function updateAnalytics() {
            document.getElementById('totalSales').textContent = `${salesData.totalSales.toLocaleString()}`;
            document.getElementById('totalOrders').textContent = salesData.totalOrders.toLocaleString();
            document.getElementById('totalCustomers').textContent = salesData.totalCustomers.toLocaleString();
            document.getElementById('conversionRate').textContent = `${salesData.conversionRate}%`;
            
            renderTopProducts();
        }

        function renderTopProducts() {
            const topProducts = document.getElementById('topProducts');
            const sortedProducts = [...products]
                .sort((a, b) => (50 - b.stock) - (50 - a.stock)) // Products with lower stock sold more
                .slice(0, 5);

            topProducts.innerHTML = '';
            sortedProducts.forEach((product, index) => {
                const soldCount = 50 - product.stock;
                const productItem = document.createElement('div');
                productItem.style.cssText = `
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 15px;
                    margin-bottom: 10px;
                    background: linear-gradient(45deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
                    border-radius: 10px;
                    border-left: 4px solid #667eea;
                `;

                productItem.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="font-size: 2rem;">${product.icon}</div>
                        <div>
                            <strong>${product.name}</strong>
                            <div style="color: #666; font-size: 0.9rem;">${product.price.toFixed(2)}</div>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 1.2rem; font-weight: bold; color: #667eea;">${soldCount} sold</div>
                        <div style="font-size: 0.9rem; color: #666;">Revenue: ${(soldCount * product.price).toFixed(2)}</div>
                    </div>
                `;

                topProducts.appendChild(productItem);
            });
        }

        function drawSalesChart() {
            const canvas = document.getElementById('salesChart');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const width = canvas.width;
            const height = canvas.height;
            const padding = 40;
            const chartWidth = width - 2 * padding;
            const chartHeight = height - 2 * padding;
            
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
            const maxSales = Math.max(...salesData.dailySales);
            
            // Draw grid lines
            ctx.strokeStyle = '#e9ecef';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            // Draw sales line
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            salesData.dailySales.forEach((sales, index) => {
                const x = padding + (chartWidth / 6) * index;
                const y = height - padding - (sales / maxSales) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                // Draw data points
                ctx.fillStyle = '#764ba2';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            ctx.stroke();
            
            // Draw labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            
            days.forEach((day, index) => {
                const x = padding + (chartWidth / 6) * index;
                ctx.fillText(day, x, height - 10);
            });
            
            // Draw y-axis labels
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                const value = maxSales - (maxSales / 5) * i;
                ctx.fillText(`${Math.round(value)}`, padding - 10, y + 5);
            }
        }

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function login() {
            const loginBtn = document.getElementById('loginBtn');
            if (!isLoggedIn) {
                // Simulate login
                isLoggedIn = true;
                currentUser = { name: 'John Doe', email: 'john@example.com' };
                loginBtn.textContent = 'Logout';
                showNotification('Logged in successfully!');
            } else {
                // Logout
                isLoggedIn = false;
                currentUser = null;
                loginBtn.textContent = 'Login';
                showNotification('Logged out successfully!');
            }
        }

        // Format card number input
        document.addEventListener('DOMContentLoaded', function() {
            const cardNumberInput = document.getElementById('cardNumber');
            const cardExpiryInput = document.getElementById('cardExpiry');
            
            cardNumberInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                e.target.value = formattedValue;
            });
            
            cardExpiryInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
            });
        });

        // Real-time inventory updates (simulated)
        setInterval(() => {
            // Simulate random purchases affecting inventory
            if (Math.random() < 0.1) { // 10% chance every 5 seconds
                const randomProduct = products[Math.floor(Math.random() * products.length)];
                if (randomProduct.stock > 0) {
                    randomProduct.stock--;
                    renderProducts();
                    renderInventory();
                    updateAnalytics();
                }
            }
        }, 5000);

        // Initialize the application when the page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>